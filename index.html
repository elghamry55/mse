<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ููุงููุช ุงูุตูุงุฉ</title>
    <link rel=" icon" type="png" href="android-chrome-192x192.png" />

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #eef2f3;
        text-align: center;
        direction: rtl;
      }
      .dark-mode {
        background-color: #222;
        color: white;
      }
      .dark-mode .button {
        background: linear-gradient(135deg, #444, #222);
      }

      .dark-mode .button:hover {
        background: linear-gradient(135deg, #333, #111);
      }
      .header {
        background: linear-gradient(to right, #0056b3, #007bff);
        color: white;
        padding: 20px;
        font-size: 24px;
      }
      .container {
        max-width: 900px;
        margin: 50px auto;
        background: white;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
      }
      .dark-mode .container {
        background: #333;
      }
      .prayer-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
      }

      .prayer-table th,
      .prayer-table td {
        padding: 12px;
        text-align: center;
        font-size: 18px;
      }

      .prayer-table th {
        background: #007bff;
        color: white;
        font-weight: bold;
      }

      .prayer-table tr:nth-child(even) {
        background: #f2f2f2;
      }

      .prayer-table tr:hover {
        background: #dbe9ff;
        transition: 0.3s;
      }

      .dark-mode .prayer-table {
        background: #333;
        color: white;
      }

      .dark-mode .prayer-table th {
        background: #0056b3;
      }

      .dark-mode .prayer-table tr:nth-child(even) {
        background: #444;
      }

      .dark-mode .prayer-table tr:hover {
        background: #666;
      }
      .button {
        background: linear-gradient(135deg, #007bff, #0056b3);
        color: white;
        padding: 12px 20px;
        font-size: 18px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .button:hover {
        background: linear-gradient(135deg, #0056b3, #003d80);
        transform: scale(1.05);
      }

      .button:active {
        transform: scale(0.95);
      }

     
      .splash-screen {
        position: fixed;
        width: 100%;
        height: 100%;
        background: black;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: white;
      }
      .info-bar {
        background: linear-gradient(90deg, #0056b3, #007bff);
        color: white;
        padding: 15px;
        text-align: center;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        font-size: 18px;
        font-weight: bold;
        margin: 20px auto;
        width: 80%;
      }
      .info-bar p {
        margin: 5px 0;
      }
      .loader {
        display: none;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #007bff;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div id="loader" class="loader"></div>
    <div class="splash-screen" id="splash">
      <img
        src="WhatsApp Image 2025-03-01 at 05.02.54_fe978c31.jpg"
        alt="ุงููุชููู"
        width="350"
      />
      <p>ุงูุญุฌ / ูุญูุฏ ุญุงูุฏ</p>
      <p>
        ุงูููููููููุ ุงุบูููุฑู ูู ููุงุฑูุญูููููุ ููุงุนููู ุนููู ููุนูุงููููุ ููุฃูููุฑููู
        ููุฒูููููุ ููููุณููุนู ููุฏูุฎูููููุ ููุงุบูุณููููู ุจููุงุกู ููุซูููุฌู ููุจูุฑูุฏูุ
        ููููููููู ูููู ุงูุฎูุทูุงููุง ููุง ูููููููู ุงูุซููููุจู ุงูุฃุจูููุถู ูููู
        ุงูุฏููููุณูุ ููุฃูุจูุฏููููู ุฏูุงุฑูุง ุฎูููุฑูุง ููู ุฏูุงุฑูููุ ููุฃูููููุง ุฎูููุฑูุง
        ููู ุฃูููููููุ ููุฒูููุฌูุง ุฎูููุฑูุง ููู ุฒูููุฌูููุ ูููููู ููุชูููุฉู ุงูููุจูุฑู
        ููุนูุฐูุงุจู ุงููููุงุฑู
      </p>
    </div>
    <div id="main-content" style="display: none">
      <div class="header">ููุงููุช ุงูุตูุงุฉ</div>
      <div class="container">
        <table class="prayer-table">
          <thead>
            <tr>
              <th>ุงูุตูุงุฉ</th>
              <th>ุงูููุช</th>
            </tr>
          </thead>
          <tbody id="prayer-times"></tbody>
        </table>
      </div>
      <div class="info-bar">
        <p>
          <strong></strong> <span id="current-location">ุฌุงุฑู ุงูุชุญุฏูุฏ...</span>
        </p>
        <p><strong></strong> <span id="current-time">--:--:--</span></p>
        <p><strong></strong> <span id="next-prayer">--</span></p>
      </div>

      <div class="container">
        <h3>ุฃุฐูุงุฑ ุงูุตุจุงุญ</h3>
        <p id="azkar-morning">ุงูููู ุจู ุฃุตุจุญูุง ูุจู ุฃูุณููุง</p>
        <button class="button" onclick="nextAzkar('morning')">ุงูุชุงูู</button>
      </div>
      <div class="container">
        <h3>ุฃุฐูุงุฑ ุงููุณุงุก</h3>
        <p id="azkar-evening">ุงูููู ุจู ุฃูุณููุง ูุจู ุฃุตุจุญูุง</p>
        <button class="button" onclick="nextAzkar('evening')">ุงูุชุงูู</button>
      </div>
      <div class="container">
        <button class="button" onclick="toggleDarkMode()">๐ ูุถุน ูููู</button>
        <button class="button" onclick="startAutoUpdate('Cairo')">
          ุชุดุบูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ๐
        </button>
        <button class="button" onclick="stopAutoUpdate()">
          ุฅููุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู โ
        </button>
      </div>
      <div class="container">
        <h3>ุงุฎุชูุงุฑ ุงููููุน</h3>
        <button class="button" onclick="getLocation()">
          ุชุญุฏูุฏ ูููุนู ุชููุงุฆููุง
        </button>
        <select id="city-list" onchange="fetchPrayerTimesManually()">
          <option value="">ุงุฎุชุฑ ุงููุญุงูุธุฉ ูุฏูููุง</option>
          <option value="cairo">ุงููุงูุฑุฉ</option>
          <option value="giza">ุงูุฌูุฒุฉ</option>
          <option value="alexandria">ุงูุฅุณููุฏุฑูุฉ</option>
          <option value="aswan">ุฃุณูุงู</option>
          <option value="asyut">ุฃุณููุท</option>
          <option value="beheira">ุงูุจุญูุฑุฉ</option>
          <option value="beni_suef">ุจูู ุณููู</option>
          <option value="dakahlia">ุงูุฏููููุฉ</option>
          <option value="damietta">ุฏููุงุท</option>
          <option value="fayoum">ุงููููู</option>
          <option value="gharbia">ุงูุบุฑุจูุฉ</option>
          <option value="ismailia">ุงูุฅุณูุงุนูููุฉ</option>
          <option value="luxor">ุงูุฃูุตุฑ</option>
          <option value="minya">ุงููููุง</option>
          <option value="monufia">ุงููููููุฉ</option>
          <option value="port_said">ุจูุฑุณุนูุฏ</option>
          <option value="qena">ููุง</option>
          <option value="sharqia">ุงูุดุฑููุฉ</option>
          <option value="sohag">ุณููุงุฌ</option>
          <option value="suez">ุงูุณููุณ</option>
        </select>
      </div>
    </div>
    <script>
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
        document.getElementById("main-content").style.display = "block";
      }, 10000);

      function updateClock() {
        let now = new Date();
        let timeString = now.toLocaleTimeString("ar-EG", {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
        document.getElementById(
          "current-time"
        ).innerText = `ุงูุณุงุนุฉ ุงูุขู: ${timeString}`;
      }

      // ุชุญุฏูุซ ุงูุณุงุนุฉ ูู ุซุงููุฉ
      setInterval(updateClock, 1000);
      updateClock(); // ุชุดุบูููุง ุนูุฏ ุงูุชุญููู

      const azkar = {
        morning: [
          "ุงูููู ุจู ุงูุตุจุญูุง ูุจู ุงููุณููุง",
          "ุงูุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู",
          "ุงูููู ุงููู ุงูุณุงููู ุงูุนูู ูุงูุนุงููุฉ ูู ุงูุฏููุง ูุงูุงูุฎุฑุฉ",
          "ุงูุตุจุญูุง ุนูู ูุทุฑุฉ ุงูุงูุณูุงูุ ููููุฉ ุงูุงูุฎูุงุตุ ูุฏูู ูุจููุง ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู",
          "ุงูููู ูุง ุงูุตุจุญ ุจู ูู ูุนูุฉ ุงูู ุจุงูุญุฏ ูู ุฎููู ูููู ูุญุฏู ูุง ุดุฑูู ูู",
          "ุญุณุจู ุงููู ูุง ุงููู ุงููุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู",
          "ุงูุตุจุญูุง ูุงูุตุจุญ ุงูููู ููู ุฑุจ ุงูุนุงูููู",
          "ุงูุตุจุญูุง ูุงูุตุจุญ ุงูููู ููู ุฑุจ ุงูุนุงูููู",
          "โ ุฑุจูุง ูุชูุจู ููู ุตุงูุญ ุงูุฃุนูุงู",
        ],
        evening: [
          "ุงูููู ุจู ุงููุณููุง ูุจู ุงูุตุจุญูุง",
          "ุงูุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู",
          "ุงูููู ุงููู ุงูุณุงููู ุงูุนูู ูุงูุนุงููุฉ ูู ุงูุฏููุง ูุงูุงูุฎุฑุฉ",
          "ุงููุณููุง ุนูู ูุทุฑุฉ ุงูุงูุณูุงูุ ููููุฉ ุงูุงูุฎูุงุตุ ูุฏูู ูุจููุง ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู",
          "ุงูููู ูุง ุงููุณู ุจู ูู ูุนูุฉ ุงูู ุจุงูุญุฏ ูู ุฎููู ูููู ูุญุฏู ูุง ุดุฑูู ูู",
          "ุญุณุจู ุงููู ูุง ุงููู ุงููุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู",
          "ุงููุณููุง ูุงููุณู ุงูููู ููู ุฑุจ ุงูุนุงูููู",
          "ุงูููู ุงููู ุงูุณุงูู ุนููุงู ูุงูุนุงูุ ูุฑุฒูุงู ุทูุจุงูุ ูุนููุงู ูุชูุจูุง",
          "โ ุฑุจูุง ูุชูุจู ููู ุตุงูุญ ุงูุฃุนูุงู",
        ],
      };

      let currentIndex = { morning: 0, evening: 0 };

      function nextAzkar(type) {
        let azkarText = document.getElementById(`azkar-${type}`);

        if (currentIndex[type] < azkar[type].length - 1) {
          currentIndex[type]++;
        } else {
          currentIndex[type] = 0; // ูุนูุฏ ูู ุงูุฃูู ุจุนุฏ ุงูุฑุณุงูุฉ
        }

        azkarText.textContent = azkar[type][currentIndex[type]];
      }

      function fetchPrayerTimesForCity(city) {
        console.log(`Fetching prayer times for city: ${city}`);

        fetch(
          `https://api.aladhan.com/v1/timingsByCity?city=${city}&country=EG&method=5`
        )
          .then((response) => response.json())
          .then((data) => {
            if (data.data) {
              let timings = data.data.timings;
              document.getElementById("prayer-times").innerHTML = `
                    <tr><td>ุงููุฌุฑ</td><td>${timings.Fajr}</td></tr>
                    <tr><td>ุงูุธูุฑ</td><td>${timings.Dhuhr}</td></tr>
                    <tr><td>ุงูุนุตุฑ</td><td>${timings.Asr}</td></tr>
                    <tr><td>ุงููุบุฑุจ</td><td>${timings.Maghrib}</td></tr>
                    <tr><td>ุงูุนุดุงุก</td><td>${timings.Isha}</td></tr>
                `;

              // ุชุญุฏูุซ ุงุณู ุงููุฏููุฉ ุงููุฎุชุงุฑุฉ
              document.getElementById(
                "selected-city"
              ).innerText = `ุงููููุน ุงูุญุงูู: ${city}`;
            }
          })
          .catch((error) =>
            console.error("Error fetching prayer times:", error)
          );
      }
      document.addEventListener("DOMContentLoaded", function () {
        const locationElement = document.getElementById("current-location");
        const timeElement = document.getElementById("current-time");
        const nextPrayerElement = document.getElementById("next-prayer"); // ุนูุตุฑ ูุนุฑุถ ุงูููุช ุงููุชุจูู

        if (!locationElement || !timeElement || !nextPrayerElement) {
          console.error("ุงูุนูุงุตุฑ ุบูุฑ ููุฌูุฏุฉ ูู HTML");
          return;
        }

        function updateTime() {
          const now = new Date();
          const hours = now.getHours().toString().padStart(2, "0");
          const minutes = now.getMinutes().toString().padStart(2, "0");
          const seconds = now.getSeconds().toString().padStart(2, "0");
          const ampm = hours >= 24 ? "ู" : "ุต";
          timeElement.textContent = `ุงูุณุงุนุฉ ุงูุขู: ${hours}:${minutes}:${seconds} ${ampm}`;
        }

        function getNextPrayer(prayerTimes) {
          const now = new Date();
          const currentTime = now.getHours() * 60 + now.getMinutes(); // ุงูููุช ุงูุญุงูู ุจุงูุฏูุงุฆู
          let nextPrayer = null;
          let nextPrayerTime = null;

          for (const [prayer, time] of Object.entries(prayerTimes)) {
            const [h, m] = time.split(":").map(Number);
            const prayerMinutes = h * 60 + m;
            if (prayerMinutes > currentTime) {
              nextPrayer = prayer;
              nextPrayerTime = prayerMinutes;
              break;
            }
          }

          if (!nextPrayer) {
            nextPrayer = "ุงููุฌุฑ"; // ูู ุนุฏุช ูู ุงูุตููุงุชุ ูุจูู ุงููุฌุฑ ูู ุงููุงุฏู
            nextPrayerTime = prayerTimes["ุงููุฌุฑ"];
          }

          const remainingMinutes = nextPrayerTime - currentTime;
          const remainingHours = Math.floor(remainingMinutes / 60);
          const remainingMins = remainingMinutes % 60;

          nextPrayerElement.textContent = `ุงูุตูุงุฉ ุงููุงุฏูุฉ: ${nextPrayer} ุจุนุฏ ${remainingHours} ุณุงุนุฉ ู ${remainingMins} ุฏูููุฉ`;
        }

        async function fetchPrayerTimes(lat, lon) {
          try {
            const response = await fetch(
              `https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=5`
            );
            const data = await response.json();
            const timings = data.data.timings;

            const prayerTimes = {
              ุงููุฌุฑ: timings.Fajr,
              ุงูุธูุฑ: timings.Dhuhr,
              ุงูุนุตุฑ: timings.Asr,
              ุงููุบุฑุจ: timings.Maghrib,
              ุงูุนุดุงุก: timings.Isha,
            };

            getNextPrayer(prayerTimes);
          } catch (error) {
            console.error("ุฎุทุฃ ูู ุฌูุจ ุฃููุงุช ุงูุตูุงุฉ:", error);
          }
        }

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(async function (position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;

            try {
              const response = await fetch(
                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`
              );
              const data = await response.json();
              const city =
                data.address.city ||
                data.address.town ||
                data.address.state ||
                "ุบูุฑ ูุนุฑูู";

              locationElement.textContent = `ุงููููุน ุงูุญุงูู: ${city}`;
              fetchPrayerTimes(lat, lon);
            } catch (error) {
              console.error("ุฎุทุฃ ูู ุฌูุจ ุงููุฏููุฉ:", error);
              locationElement.textContent = "ุฎุทุฃ ูู ุชุญุฏูุฏ ุงููููุน";
            }
          });
        } else {
          locationElement.textContent = "ุงููููุน ุบูุฑ ูุฏุนูู";
        }

        setInterval(updateTime, 1000);
        updateTime();
      });

      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
      }

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              fetchPrayerTimes(
                position.coords.latitude,
                position.coords.longitude
              );
            },
            () => {
              alert("ูุฑุฌู ุชูุนูู ุงููููุน ููุญุตูู ุนูู ุงูููุงููุช ุจุฏูุฉ.");
            }
          );
        } else {
          alert("ุงููุชุตูุญ ูุง ูุฏุนู ุชุญุฏูุฏ ุงููููุน.");
        }
      }

      function fetchPrayerTimesManually() {
        let city = document.getElementById("city-list").value;
        if (city) {
          console.log(`Fetching prayer times for city: ${city}`);
          // ููููู ููุง ุฅุถุงูุฉ ููุฏ ูุฌูุจ ุงูููุงููุช ุจูุงุกู ุนูู ุงููุฏููุฉ
        }
      }

      async function fetchPrayerTimes(city) {
        let loader = document.getElementById("loader");
        loader.style.display = "block"; // ุฅุธูุงุฑ ุงูููุฏุฑ

        try {
          let response = await fetch(
            `https://api.aladhan.com/v1/timingsByCity?city=${city}&country=EG`
          );
          let data = await response.json();
          displayPrayerTimes(data.data.timings);
        } catch (error) {
          console.error("Error fetching data:", error);
        } finally {
          loader.style.display = "none"; // ุฅุฎูุงุก ุงูููุฏุฑ ุจุนุฏ ุงูุชุญููู
        }
      }

      let autoUpdate; // ูุชุบูุฑ ูุญูุธ ุงูู Interval

      function startAutoUpdate(city) {
        // ุชุญุฏูุซ ุงูููุงุนูุฏ ูุจุงุดุฑุฉ ุนูุฏ ุชุดุบูู ุงูููุฒุฉ
        fetchPrayerTimes(city);

        // ุชุญุฏูุซ ุงูููุงุนูุฏ ูู ุณุงุนุฉ (3600000ms = 1 ุณุงุนุฉ)
        autoUpdate = setInterval(() => {
          fetchPrayerTimes(city);
          console.log("โ ุชู ุชุญุฏูุซ ููุงุนูุฏ ุงูุตูุงุฉ ุชููุงุฆููุง");
        }, 3600000);
      }

      function stopAutoUpdate() {
        clearInterval(autoUpdate);
        console.log("โ ุชู ุฅููุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู");
      }

      function displayPrayerTimes(timings) {
        let tableBody = document.getElementById("prayer-times");
        tableBody.innerHTML = ""; // ุชูุฑูุบ ุงูุฌุฏูู

        const prayers = ["Fajr", "Dhuhr", "Asr", "Maghrib", "Isha"];
        const arabicNames = ["ุงููุฌุฑ", "ุงูุธูุฑ", "ุงูุนุตุฑ", "ุงููุบุฑุจ", "ุงูุนุดุงุก"];
        const icons = [
          "๐", // ุงููุฌุฑ
          "โ๏ธ", // ุงูุธูุฑ
          "๐", // ุงูุนุตุฑ
          "๐", // ุงููุบุฑุจ
          "๐", // ุงูุนุดุงุก
        ];

        prayers.forEach((prayer, index) => {
          let row = `
            <tr>
                <td>${icons[index]} ${arabicNames[index]}</td>
                <td>${timings[prayer]}</td>
            </tr>`;
          tableBody.innerHTML += row;
        });
      }
    </script>
  </body>
</html>
